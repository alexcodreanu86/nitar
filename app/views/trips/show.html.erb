<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
  <div class="well shaddowed">
    <h1>Trip for: <%= @trip.contact_name %></h1>
    <div class="table-responsive">
      <table class="table">
        <tr>
          <td>Pick up date/time:</td><td><%= @trip.pickup_time %></td>
        </tr>

        <tr>
          <td>Pick up information:</td><td><%= @trip.pick_up %></td>
        </tr>

        <tr>
          <td>Drop off information:</td> <td><%= @trip.drop_off %></td>
        </tr>

        <% if @trip.airport %>
          <tr>
            <td>Airport:</td><td><%= @trip.airport == 1 ? "Chicago O'hare (ORD)" : "Chicago Midway (MDW)" %></td>
          </tr>
        <% elsif @trip.hours%>
          <tr>
            <td>Hours booked</td> <td><%= @trip.hours %></td>
          </tr>
        <% end %>

        <tr>
          <td>Number of passengers:</td> <td><%= @trip.number_of_passengers %></td>
        </tr>

        <tr>
          <td>Car type: </td><td><%= @trip.car.name %></td>
        </tr>

        <tr>
          <td>Contact phone:</td> <td><%= @trip.contact_phone %></td>
        </tr>

        <tr>
          <td>Contact email:</td> <td><%= @trip.contact_email %></td>
        </tr>
        <tr>
          <td>Base price (no gratuity included):</td><td><%= number_to_currency(@trip.base_price) %></td>
        </tr>
        <% @trip.extra_charges.each do |charge| %>
          <tr>
            <td><%= charge.description %>:</td>
            <td>
              <%= number_to_currency(charge.price) %>
              <% if current_admin? %>
                <%= link_to "Delete",extra_charge_path(charge) , data: {confirm: "Are you sure you want to remove this extra charge?"}, class: "btn btn-danger btn-sm pull-right", method: "DELETE" %> 
                <%= link_to "Edit", edit_extra_charge_path(charge.id), class: "btn btn-primary btn-sm pull-right" %>
              <% end %>
            </td>
          </tr>
        <% end %>
        <tr>
          <td><strong>Total price:</strong></td><td><strong><%= number_to_currency(@trip.total_price) %></strong></td>
        </tr>
        <% if current_admin? %>
          <tr class="<%= @trip.driver_information && !@trip.driver_information.empty? ? "" : "danger" %>">
            <td>Driver information: </td><td><%= @trip.driver_information %></td>
          </tr>
        <% end %>
      </table>
    </div>
    <% if @trip.description != "" %>
      <p>You have added this extra information to the trip: <br><%= @trip.description %></p>
    <% end %>

    <% if current_admin? %>
      <%= link_to "Edit", edit_trip_path(@trip), class: 'btn btn-primary btn-md' %>
      <%= link_to "Toggle Payment Info", toggle_trip_payment_path(@trip), class: 'btn btn-primary btn-md' %>
      <%= link_to "Add Extra Charge", new_trip_extra_charge_path(@trip), class: "btn btn-primary btn-md" %>
      <%= link_to "Delete Trip", trip_path(@trip), class: 'btn btn-danger btn-md', data: {confirm: "Are you sure you want to delete this trip?"}, method: "DELETE" %>
      <% if @trip.payment_information %>
        <p class="text-success">This trip has payment information on file.</p>
      <% else %>
        <p class="bg-danger">This trip does not have payment information on file yet.</p>
      <% end %>
    <% end %>
  </div>
</div>
